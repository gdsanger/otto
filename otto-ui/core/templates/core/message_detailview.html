{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar">
    <form method="post" action="/message/send/" class="btn-group" role="group">
      {% csrf_token %}
      <input type="hidden" name="message_id" value="{{ message.id }}">
      <button type="submit" class="btn btn-outline-primary" {% if message.direction != 'out' or message.status == 'gesendet' %}disabled{% endif %}>ğŸ“§ Senden</button>
    </form>
  </div>
  <div class="card">
    <div class="card-header">
      {{ message.subject }}
    </div>
    <div class="card-body">
      <p><strong>Datum:</strong> {{ message.datum }}</p>
      <p><strong>From:</strong>
        {% if message.sender %}
          {{ message.sender }}
        {% elif message.from %}
          {{ message.from }}
        {% else %}
          -
        {% endif %}
      </p>
      <p><strong>To:</strong> {{ message.to|join:', ' }}</p>
      <p><strong>Cc:</strong> {{ message.cc|default_if_none:''|join:', ' }}</p>
      <p><strong>Status:</strong> {{ message.status }}</p>
      {% if message.project_id %}
      <p><strong>Projekt:</strong> {{ message.project_id }}</p>
      {% endif %}
      {% if message.task_id %}
      <p><strong>Task:</strong> {{ message.task_id }}</p>
      {% endif %}
      {% if message.sprint_id %}
      <p><strong>Sprint:</strong> {{ message.sprint_id }}</p>
      {% endif %}
      <div class="mt-3 border p-3" style="background:white;">
        {{ message.message|safe }}
      </div>
    </div>
  </div>
</div>
{% endblock %}
